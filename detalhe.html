<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Detalhes do Item</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <a href="index.html">â¬… Voltar para a lista</a>
  <h1>Detalhes do Item</h1>
  <div id="detalhes">
    <p id="carregando" class="carregando">Carregando detalhes...</p>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const detalhesContainer = document.getElementById("detalhes");
      const carregando = document.getElementById("carregando");

      const params = new URLSearchParams(window.location.search);
      const id = params.get("id");

      if (!id) {
        if (carregando) carregando.remove();
        detalhesContainer.innerHTML = "<p>Nenhum ID informado.</p>";
        return;
      }

      fetch(`https://api.restful-api.dev/objects/${id}`)
        .then(res => res.json())
        .then(item => {
          if (carregando) carregando.remove();

          const { id, name, data } = item;
          let html = `<div class="item-detalhes">`;
          html += `<div><strong>ID:</strong> ${id}</div>`;
          html += `<div><strong>Nome:</strong> ${name}</div>`;

          if (data) {
            html += `<div><strong>Data:</strong></div><div class="data">`;
            for (const chave in data) {
              html += `<div>${chave}: ${data[chave]}</div>`;
            }
            html += `</div>`;
          }

          html += `</div>`;
          detalhesContainer.innerHTML = html;
        })
        .catch(err => {
          console.error("Erro ao carregar detalhes:", err);
          if (carregando) {
            carregando.textContent = "Erro ao carregar os detalhes. Tente novamente mais tarde.";
            carregando.classList.add("erro");
          }
        });
    });
  </script>
</body>
</html>
